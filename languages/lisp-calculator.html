<meta charset="utf-8">

<script src="js/jquery.js"></script>
<script src="js/jqconsole.js"></script>
<script src="js/sugar.js"></script>
<script src="js/peg.js"></script>
<script src="js/plt.js"></script>

<script type="text/javascript">
  // uncomment next line to enable refresh
  // PLT.refresh = true

  // write helper functions and semantics here
</script>

<title>Lisp Calculator</title>

<!--

PEG syntax quick reference

'x'   : match the literal character 'x'
x+    : match x 1 or more times
x*    : match x 0 or more times
x?    : match x 0 or 1 times
!x    : match anything but the match x
x/y   : match x or y, trying in that order
[xyz] : match one of the literal character 'x', 'y', or 'z'
v:x   : assign the result of the match x to the variable v

Full documentation: http://pegjs.majda.cz/documentation#grammar-syntax-and-semantics-parsing-expression-types

-->
<grammar>
  start       = '(' '+' space a:(start / number) ' ' b:(start / number) space ')' { return a + b }

  number      = d:digit+ { return parseInt( d.join('') ) }
  digit       = [0123456789]

  space       = ' '*
</grammar>

<h3>Addition</h3>
<code expect="15">(+ 5 10)</code>
<code expect="20">(+7 13)</code>
<code>(+ 7 13)</code>
<code>(+ 7 13 )</code>
<code>(+ 7 15 )</code>

<h4>Homework — Subtraction<h4>

<code expect="55">(- 70 15)</code>
<code expect="55">(- 70 15 )</code>
<code expect="55">(-   70   15 )</code>

<h4>Homework — Multiplication<h4>
  
<code expect="105">(* 7 15)</code>
<code expect="105">(* 7 15 )</code>
<code expect="105">(*   7   15 )</code>

<h4>Homework — Nested Expressions<h4>
  
<code expect="42">(* 7 (- 10 4))</code>
<code expect="42">(* 7 (- 10 (+ 2 2)))</code>
<code expect="42">(* 7 (- (* 5 2) (+ 2 2)))</code>

<h4>Homework — <a href="https://en.wikipedia.org/wiki/Variadic_function">Variatic</a> Expressions<h4>
<code expect="-26">(- 7 15 5 6 7)</code>  
<code expect="-66">(- 7 15 5 6 7 7 15 5 6 7)</code>  
<code expect="-306">(- 7 15 5 6 7 7 15 5 6 7 7 15 5 6 7 7 15 5 6 7 7 15 5 6 7 7 15 5 6 7 7 15 5 6 7 7 15 5 6 7)</code>  

<h4>Homework — Nested Variatic Expressions<h4>
<code expect="6749">(+ 7 (+ 4 5 1) 5 (* 8 15 (- 40 12) 2) 7)</code>